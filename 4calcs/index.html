<!DOCTYPE html>
<html manifest="">

<title>4CALCS</title>
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=2.0, minimum-scale=1.0">
<meta name="format-detection" content="telephone=no">
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">

<script src="js/ui.js"></script>
<script src="js/divafw.js"></script>

<style>
    body {padding:0;margin:0;background:#000;}
    div.view {position:absolute;margin:auto;display:-webkit-box;-webkit-box-align:center;-webkit-box-pack:center;box-sizing: border-box;}
    div.view.scroll { z-index:-1;}
    * {font-family:"Courier New";box-sizing:border-box;}
    input,input:active {-webkit-appearance:none;appearance:none;width:100%;border:0px;outline:0px;-webkit-tap-highlight-color:rgba(0,0,0,0);tap-highlight-color:rgba(0,0,0,0);}
    svg{display:block;margin:0;padding:0;display:-webkit-box;-webkit-box-align:center;-webkit-box-pack:center;box-sizing: border-box;}
</style>
<script src="js/calc.js"></script>
<script>
window.onload = function() {
//
//    
//    
//    function formulaToHtml(formula) {
//        var res = formula;
//        res = res.replace(/ \* /g,"<span style='color:#39c'>&times;</span>");
//        res = res.replace(/ \/ /g,"<span style='color:#39c'>&divide;</span>");
//        res = res.replace(/ - /g,"<span style='color:#39c'>&minus;</span>");
//        res = res.replace(/-/g,"&#x2011;");
//        
//        res = res.replace(/ \+ /g,"<span style='color:#39c'>&plus;</span>");
//        res = res.replace(/ \= /g,"<span style='color:#39c'>=</span>");
//        //res = res.replace(/\./g,"<span style='margin:-"+(SIZE/20)+"px;'>.</span>");
//        res = res.replace(/ \/ /g,"&divide;");
//        return res;
//    }
//    
//    function historyToHtml(history) {
//        var res = history;
//        res = res.replace(/ \* /g, "&times");
//        res = res.replace(/ \/ /g, "&divide;");
//        res = res.replace(/ - /g, "&minus;");
//        res = res.replace(/-/g,"&#x2011;");
//        res = res.replace(/ \+ /g,"&plus;");
//        res = res.replace(/ \= /g,"=");
//        res = res.replace(/ \/ /g,"&divide;");
//        //res = res.replace(/\./g,"<span style='margin:-"+(SIZE/40)+"px;'>.</span>");
//        return res;
//    }
//    

    var formula = new Formula();
    var ui = new CalcUI();
    
    function actionEqual() {
        var result = formula.evaluate();
        ui.setHistory(formula.getDisplay() + " = " + result);
        formula.reset(result);
        ui.setDisplay(" = "+result);
    }
    
    ui.onDigit = function(digit) {formula.addDigit(digit);}
    ui.onOperator = function(oper) {formula.setOperator(oper);}
    ui.onBackspace = function() {formula.backspace();}
    ui.onClear = function() {formula.reset(0);}
    ui.onEqual = actionEqual;

    formula.onChange = function() {ui.setDisplay(formula.getDisplay());}
    
    AFW.appendChild(ui);

    

} //onload

</script>

<body>
<div id="viewport" style="position:fixed;top:0;left:0;bottom:0;right:0;"></div>
</body>

</html>
